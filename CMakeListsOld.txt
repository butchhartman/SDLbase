# CMakeList.txt : CMake project for GPbase, include source and define
# project specific logic here.
#
cmake_minimum_required (VERSION 3.8)

# Enable Hot Reload for MSVC compilers if supported.
if (POLICY CMP0141)
  cmake_policy(SET CMP0141 NEW)
  set(CMAKE_MSVC_DEBUG_INFORMATION_FORMAT "$<IF:$<AND:$<C_COMPILER_ID:MSVC>,$<CXX_COMPILER_ID:MSVC>>,$<$<CONFIG:Debug,RelWithDebInfo>:EditAndContinue>,$<$<CONFIG:Debug,RelWithDebInfo>:ProgramDatabase>>")
endif()

project ("SDLbase" C)


#External dependencies

# Module that allows downloading of external repos
include(FetchContent)

FetchContent_Declare(
        DocTest
        GIT_REPOSITORY "https://github.com/onqtam/doctest"
        GIT_TAG "932a2ca50666138256dae56fbb16db3b1cae133a"
)


FetchContent_MakeAvailable(DocTest)


# Add external as a subdir so its CMakeLists.txt will run
#add_subdirectory("external")

# Add link director(y/ies) for libraries
link_directories ("lib")

# Add source to this project's executable.
add_executable (SDLbase "src/SDLbase.c"  "include/SDLbase.h")

# Makes directories in the source directory visible as system directories (can be included by <>)
# This allows libraries to work without me changing their include paths
target_include_directories (SDLbase SYSTEM PUBLIC "${PROJECT_SOURCE_DIR}/include")

# TODO : Include cglm in project files
# Add libraries to this project's executable.
# Simply can specify the SDLbase of the library because CMake knows to look in the lib folder.
target_link_libraries (SDLbase DocTest)

if (CMAKE_VERSION VERSION_GREATER 3.12)
  set_property(TARGET SDLbase PROPERTY C_STANDARD 23)
endif()

# TODO: Add tests and install targets if needed.
